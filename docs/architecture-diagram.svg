<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="1400" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <!-- Define gradients and styles -->
  <defs>
    <!-- Gradient definitions -->
    <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="stageGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="parseGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fa709a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fee140;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="textGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#30cfd0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#330867;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="imageGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#a8edea;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fed6e3;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="embedGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f093fb;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f5576c;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="searchGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="extractGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#43e97b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#38f9d7;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="analyticsGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#fa709a;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fee140;stop-opacity:1" />
    </linearGradient>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#667eea" />
    </marker>
    
    <!-- Drop shadow -->
    <filter id="shadow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
      <feOffset dx="2" dy="2" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.3"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="1400" fill="#f8f9fa"/>
  
  <!-- Title -->
  <rect x="50" y="20" width="1100" height="80" rx="10" fill="url(#headerGradient)" filter="url(#shadow)"/>
  <text x="600" y="65" font-family="Arial, sans-serif" font-size="32" font-weight="bold" fill="white" text-anchor="middle">
    🧬 GWAS Intelligence Pipeline Architecture
  </text>
  <text x="600" y="90" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" opacity="0.9">
    Multimodal RAG with Snowflake Cortex AI
  </text>
  
  <!-- Stage 1: PDF Upload & Storage -->
  <g id="stage1">
    <rect x="100" y="140" width="1000" height="120" rx="8" fill="url(#stageGradient)" opacity="0.2" filter="url(#shadow)"/>
    <text x="120" y="170" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1565c0">
      📤 Stage 1: PDF Upload &amp; Storage
    </text>
    
    <rect x="150" y="190" width="180" height="50" rx="5" fill="#ffffff" stroke="#4facfe" stroke-width="2" filter="url(#shadow)"/>
    <text x="240" y="215" font-family="Arial, sans-serif" font-size="14" fill="#1565c0" text-anchor="middle" font-weight="bold">
      Research Papers
    </text>
    <text x="240" y="232" font-family="Arial, sans-serif" font-size="11" fill="#666" text-anchor="middle">
      (PDF files)
    </text>
    
    <!-- Arrow -->
    <line x1="330" y1="215" x2="390" y2="215" stroke="#667eea" stroke-width="3" marker-end="url(#arrowhead)"/>
    
    <rect x="410" y="190" width="200" height="50" rx="5" fill="url(#stageGradient)" filter="url(#shadow)"/>
    <text x="510" y="215" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="bold">
      Snowflake Stage
    </text>
    <text x="510" y="232" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      @PDF_RAW.PDF_STAGE
    </text>
    
    <!-- Arrow -->
    <line x1="610" y1="215" x2="670" y2="215" stroke="#667eea" stroke-width="3" marker-end="url(#arrowhead)"/>
    
    <rect x="690" y="190" width="180" height="50" rx="5" fill="#ffffff" stroke="#4facfe" stroke-width="2" filter="url(#shadow)"/>
    <text x="780" y="212" font-family="Arial, sans-serif" font-size="13" fill="#1565c0" text-anchor="middle" font-weight="bold">
      Batch Processing
    </text>
    <text x="780" y="228" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">
      (Multiple PDFs)
    </text>
  </g>
  
  <!-- Stage 2: AI Parse Document -->
  <g id="stage2">
    <rect x="100" y="300" width="1000" height="120" rx="8" fill="url(#parseGradient)" opacity="0.2" filter="url(#shadow)"/>
    <text x="120" y="330" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#c62828">
      🤖 Stage 2: AI Document Parsing
    </text>
    
    <rect x="250" y="350" width="280" height="60" rx="5" fill="url(#parseGradient)" filter="url(#shadow)"/>
    <text x="390" y="375" font-family="Arial, sans-serif" font-size="15" fill="white" text-anchor="middle" font-weight="bold">
      AI_PARSE_DOCUMENT
    </text>
    <text x="390" y="393" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      Cortex AI • LAYOUT mode • Page split
    </text>
    
    <rect x="570" y="350" width="260" height="60" rx="5" fill="#ffffff" stroke="#fa709a" stroke-width="2" filter="url(#shadow)"/>
    <text x="700" y="375" font-family="Arial, sans-serif" font-size="13" fill="#c62828" text-anchor="middle" font-weight="bold">
      PARSED_DOCUMENTS
    </text>
    <text x="700" y="393" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">
      Raw Markdown + Metadata
    </text>
  </g>
  
  <!-- Arrow down from Stage 2 -->
  <line x1="600" y1="420" x2="600" y2="460" stroke="#667eea" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Stage 3: Content Extraction (Split into Text & Images) -->
  <g id="stage3">
    <rect x="100" y="480" width="1000" height="180" rx="8" fill="#e8f5e9" opacity="0.5" filter="url(#shadow)"/>
    <text x="120" y="510" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#2e7d32">
      📄 Stage 3: Content Extraction &amp; Processing
    </text>
    
    <!-- Text Path -->
    <g id="textPath">
      <rect x="150" y="540" width="180" height="100" rx="5" fill="url(#textGradient)" filter="url(#shadow)"/>
      <text x="240" y="565" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="bold">
        Text Extraction
      </text>
      <text x="240" y="590" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
        • Page-by-page text
      </text>
      <text x="240" y="608" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
        • Markdown content
      </text>
      <text x="240" y="626" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
        • TEXT_PAGES table
      </text>
    </g>
    
    <!-- Image Path -->
    <g id="imagePath">
      <rect x="370" y="540" width="180" height="100" rx="5" fill="url(#imageGradient)" filter="url(#shadow)"/>
      <text x="460" y="565" font-family="Arial, sans-serif" font-size="14" fill="#1565c0" text-anchor="middle" font-weight="bold">
        Image Generation
      </text>
      <text x="460" y="590" font-family="Arial, sans-serif" font-size="11" fill="#1565c0" text-anchor="middle">
        • PyMuPDF conversion
      </text>
      <text x="460" y="608" font-family="Arial, sans-serif" font-size="11" fill="#1565c0" text-anchor="middle">
        • PNG per page
      </text>
      <text x="460" y="626" font-family="Arial, sans-serif" font-size="11" fill="#1565c0" text-anchor="middle">
        • IMAGE_PAGES table
      </text>
    </g>
  </g>
  
  <!-- Stage 4: Embedding Generation -->
  <g id="stage4">
    <rect x="100" y="700" width="1000" height="140" rx="8" fill="url(#embedGradient)" opacity="0.2" filter="url(#shadow)"/>
    <text x="120" y="730" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#c2185b">
      🔮 Stage 4: Multimodal Embedding Generation
    </text>
    
    <rect x="180" y="755" width="240" height="70" rx="5" fill="url(#embedGradient)" filter="url(#shadow)"/>
    <text x="300" y="780" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="bold">
      AI_EMBED (Text)
    </text>
    <text x="300" y="798" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      snowflake-arctic-embed-l-v2.0-8k
    </text>
    <text x="300" y="814" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      1024D vectors
    </text>
    
    <rect x="460" y="755" width="240" height="70" rx="5" fill="url(#embedGradient)" filter="url(#shadow)"/>
    <text x="580" y="780" font-family="Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="bold">
      AI_EMBED (Images)
    </text>
    <text x="580" y="798" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      voyage-multimodal-3
    </text>
    <text x="580" y="814" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      1024D vectors
    </text>
    
    <rect x="740" y="755" width="200" height="70" rx="5" fill="#ffffff" stroke="#f093fb" stroke-width="2" filter="url(#shadow)"/>
    <text x="840" y="780" font-family="Arial, sans-serif" font-size="13" fill="#c2185b" text-anchor="middle" font-weight="bold">
      MULTIMODAL_PAGES
    </text>
    <text x="840" y="798" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">
      Text + Image embeddings
    </text>
    <text x="840" y="814" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">
      Combined vectors
    </text>
  </g>
  
  <!-- Arrow down from Stage 4 -->
  <line x1="600" y1="840" x2="600" y2="880" stroke="#667eea" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Stage 5: Search Service -->
  <g id="stage5">
    <rect x="100" y="900" width="1000" height="100" rx="8" fill="url(#searchGradient)" opacity="0.2" filter="url(#shadow)"/>
    <text x="120" y="930" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1565c0">
      🔍 Stage 5: Cortex Search Service
    </text>
    
    <rect x="250" y="950" width="300" height="40" rx="5" fill="url(#searchGradient)" filter="url(#shadow)"/>
    <text x="400" y="975" font-family="Arial, sans-serif" font-size="13" fill="white" text-anchor="middle" font-weight="bold">
      MULTIMODAL_SEARCH_SERVICE
    </text>
    
    <rect x="590" y="950" width="280" height="40" rx="5" fill="#ffffff" stroke="#4facfe" stroke-width="2" filter="url(#shadow)"/>
    <text x="730" y="968" font-family="Arial, sans-serif" font-size="11" fill="#1565c0" text-anchor="middle">
      Multi-Index: Text + 2 Vector Embeddings
    </text>
    <text x="730" y="984" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">
      Hybrid search (keyword + semantic)
    </text>
  </g>
  
  <!-- Arrow down from Stage 5 -->
  <line x1="600" y1="1000" x2="600" y2="1040" stroke="#667eea" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Stage 6: Trait Extraction -->
  <g id="stage6">
    <rect x="100" y="1060" width="1000" height="160" rx="8" fill="url(#extractGradient)" opacity="0.2" filter="url(#shadow)"/>
    <text x="120" y="1090" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1b5e20">
      🧬 Stage 6: GWAS Trait Extraction
    </text>
    
    <!-- Phase 1 -->
    <rect x="150" y="1115" width="200" height="90" rx="5" fill="url(#extractGradient)" filter="url(#shadow)"/>
    <text x="250" y="1138" font-family="Arial, sans-serif" font-size="13" fill="white" text-anchor="middle" font-weight="bold">
      Phase 1: Text
    </text>
    <text x="250" y="1158" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      AI_EXTRACT
    </text>
    <text x="250" y="1174" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      Complex prompts
    </text>
    <text x="250" y="1190" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      15 GWAS traits
    </text>
    
    <!-- Arrow -->
    <line x1="350" y1="1160" x2="400" y2="1160" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- Phase 2 -->
    <rect x="410" y="1115" width="200" height="90" rx="5" fill="url(#extractGradient)" filter="url(#shadow)"/>
    <text x="510" y="1138" font-family="Arial, sans-serif" font-size="13" fill="white" text-anchor="middle" font-weight="bold">
      Phase 2: Multimodal
    </text>
    <text x="510" y="1158" font-family="Arial, sans-serif" font-size="11" fill="white" text-anchor="middle">
      Search + Extract
    </text>
    <text x="510" y="1174" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      Text + Images
    </text>
    <text x="510" y="1190" font-family="Arial, sans-serif" font-size="10" fill="white" text-anchor="middle">
      Validation
    </text>
    
    <!-- Arrow -->
    <line x1="610" y1="1160" x2="660" y2="1160" stroke="#667eea" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- Phase 3 -->
    <rect x="670" y="1115" width="180" height="90" rx="5" fill="#ffffff" stroke="#43e97b" stroke-width="2" filter="url(#shadow)"/>
    <text x="760" y="1138" font-family="Arial, sans-serif" font-size="13" fill="#1b5e20" text-anchor="middle" font-weight="bold">
      Phase 3: Merge
    </text>
    <text x="760" y="1158" font-family="Arial, sans-serif" font-size="11" fill="#1b5e20" text-anchor="middle">
      2-way merge
    </text>
    <text x="760" y="1174" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">
      Confidence levels
    </text>
    <text x="760" y="1190" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">
      HIGH/MEDIUM/LOW
    </text>
  </g>
  
  <!-- Arrow down from Stage 6 -->
  <line x1="600" y1="1220" x2="600" y2="1260" stroke="#667eea" stroke-width="3" marker-end="url(#arrowhead)"/>
  
  <!-- Stage 7: Final Analytics -->
  <g id="stage7">
    <rect x="100" y="1280" width="1000" height="100" rx="8" fill="url(#analyticsGradient)" opacity="0.2" filter="url(#shadow)"/>
    <text x="120" y="1310" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#c62828">
      📊 Stage 7: Analytics &amp; Storage
    </text>
    
    <rect x="250" y="1330" width="280" height="40" rx="5" fill="url(#analyticsGradient)" filter="url(#shadow)"/>
    <text x="390" y="1355" font-family="Arial, sans-serif" font-size="13" fill="white" text-anchor="middle" font-weight="bold">
      GWAS_TRAIT_ANALYTICS
    </text>
    
    <rect x="570" y="1330" width="260" height="40" rx="5" fill="#ffffff" stroke="#fa709a" stroke-width="2" filter="url(#shadow)"/>
    <text x="700" y="1348" font-family="Arial, sans-serif" font-size="11" fill="#c62828" text-anchor="middle">
      15 traits • Confidence scores
    </text>
    <text x="700" y="1364" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">
      Field citations • Accuracy metrics
    </text>
  </g>
  
  <!-- Legend -->
  <g id="legend">
    <text x="120" y="1410" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">
      Key Technologies:
    </text>
    <text x="120" y="1435" font-family="Arial, sans-serif" font-size="11" fill="#666">
      🤖 Snowflake Cortex AI • 📊 Snowpark Python • 🔍 Cortex Search • 🧬 Multimodal RAG
    </text>
    
    <text x="700" y="1410" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#333">
      Extraction Accuracy:
    </text>
    <text x="700" y="1435" font-family="Arial, sans-serif" font-size="11" fill="#666">
      67% success rate • Batch processing • Error handling
    </text>
  </g>
</svg>
